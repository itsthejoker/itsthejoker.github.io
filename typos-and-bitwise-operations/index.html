<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Typos and Bitwise Operations - Joe Kaufeld</title><meta name=Description content="Personal writing, projects, and thoughts galore."><meta property="og:url" content="https://itsthejoker.github.io/typos-and-bitwise-operations/">
<meta property="og:site_name" content="Joe Kaufeld"><meta property="og:title" content="Typos and Bitwise Operations"><meta property="og:description" content="Sometimes typos turn out to be unary operators in disguise."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-06-17T11:29:40-04:00"><meta property="article:modified_time" content="2024-06-17T22:01:21-04:00"><meta property="article:tag" content="Python"><meta property="article:tag" content="Terminal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Typos and Bitwise Operations"><meta name=twitter:description content="Sometimes typos turn out to be unary operators in disguise."><meta name=twitter:site content="@joekaufeld"><meta name=application-name content="Joe Kaufeld"><meta name=apple-mobile-web-app-title content="Joe Kaufeld"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://itsthejoker.github.io/typos-and-bitwise-operations/><link rel=prev href=https://itsthejoker.github.io/joplin-and-fastmail/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=/lib/fontawesome-free/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload href=/lib/animate/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Typos and Bitwise Operations","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/itsthejoker.github.io\/typos-and-bitwise-operations\/"},"image":[{"@type":"ImageObject","url":"https:\/\/itsthejoker.github.io\/images\/me.jpg","width":2542,"height":2363}],"genre":"posts","keywords":"python, terminal","wordcount":1366,"url":"https:\/\/itsthejoker.github.io\/typos-and-bitwise-operations\/","datePublished":"2024-06-17T11:29:40-04:00","dateModified":"2024-06-17T22:01:21-04:00","license":"All rights reserved.","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Joe Kaufeld"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Joe Kaufeld">Joe Kaufeld</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/software_and_media>Software & Media </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=/series/>Series </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Joe Kaufeld">Joe Kaufeld</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/software_and_media title>Software & Media</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=/series/ title>Series</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class="toc-content always-active" id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Typos and Bitwise Operations</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://joekaufeld.com title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Joe Kaufeld</a></span>&nbsp;<span class=post-category>included in <a href=/categories/python/><i class="far fa-folder fa-fw" aria-hidden=true></i>Python</a></span></div><div class=post-meta-line></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2024-06-17>2024-06-17</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;1366 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;7 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#sometimes-typos-can-be-fun>Sometimes Typos Can Be Fun</a></li><li><a href=#evil-bitwise-hacking>Evil bitwise hacking</a></li><li><a href=#what-can-you-do-with-it>What can you do with it?</a><ul><li><a href=#accessing-the-end-of-lists>Accessing the end of lists</a></li><li><a href=#a-direct-not-operator>A direct &rsquo;not&rsquo; operator</a></li><li><a href=#write-your-own-functionality>Write your own functionality</a></li></ul></li><li><a href=#wrapping-up>Wrapping up</a></li></ul></nav></div></div><div class=content id=content><h2 id=sometimes-typos-can-be-fun>Sometimes Typos Can Be Fun</h2><p>A little while ago, I was playing around with some code in the Python REPL<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> and made a typo that spawned a whole rabbit hole of reading.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=mi>4</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>x</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=o>~</span><span class=n>x</span>  <span class=c1># Typo! Where&#39;d that ~ come from?</span>
</span></span><span class=line><span class=cl><span class=o>-</span><span class=mi>5</span>
</span></span></code></pre></td></tr></table></div></div><figure><a class=lightgallery href=/gifs/keanu-reeves-head-tilt-confused.webp title="Keanu Reeves tilting his head with a &lsquo;wtf&rsquo; expression." data-thumbnail=/gifs/keanu-reeves-head-tilt-confused.webp data-sub-html="<h2>Definitely me staring at my screen.</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/gifs/keanu-reeves-head-tilt-confused.webp data-srcset="/gifs/keanu-reeves-head-tilt-confused.webp, /gifs/keanu-reeves-head-tilt-confused.webp 1.5x, /gifs/keanu-reeves-head-tilt-confused.webp 2x" data-sizes=auto alt="Keanu Reeves tilting his head with a &lsquo;wtf&rsquo; expression." width=400 height=400></a><figcaption class=image-caption>Definitely me staring at my screen.</figcaption></figure><p>Time to do some digging.</p><h2 id=evil-bitwise-hacking>Evil bitwise hacking</h2><p>Let&rsquo;s start with a quick explanation of what we&rsquo;re actually looking at here, because some of the terms are confusingly similar.</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fas fa-info-circle fa-fw" aria-hidden=true></i>Definitions!<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><p><strong>Bit</strong>: A one or a zero. Multiple bits come together to form a byte, which can communicate information.</p><p><strong>Byte (Octet)</strong>: A byte is eight bits. For example, the letter &ldquo;a&rdquo; (specifically the lowercase version) is one byte in size and looks like this: <code>01100001</code>.</p><p><strong>Nibble</strong>: Only four bits — half of a byte and capable of representing numbers from 0 to 15. For ease of reading, we&rsquo;ll be mostly using nibbles as examples throughout this post.</p><p><strong>Binary Numbers</strong>: how computers view numbers. This can be a very deep topic, but the gist of it is that all integer numbers are made of bytes. A nibble (a four-byte number) is something like 0000 or 1010, and the way that you read it is by starting at the right and counting left in powers of two. If we look at 1010, you read it by breaking it apart into places. Since there are four places, the meanings of each place are <strong>8-4-2-1</strong>. Taking this, we can use our binary number (<code>1010</code>) and look at the values to figure out what we have: <code>(1 * 8) + (0 * 4) + (1 * 2) + (0 * 1)</code>, or 8 + 2 = 10. By the same logic, <code>0000</code> is <code>(0 * 8) + (0 * 4) + (0 * 2) + (0 * 1)</code>, which turns out to be a big whopping zero.</p><p><strong>Binary Arithmetic</strong>: Any operation or modification that involves two numbers, like multiplication or addition.</p><p><strong>Unary Arithmetic</strong>: Any operation or modification that only involves one number.</p><p><strong>MSB</strong>: Most Significant Bit. It&rsquo;s the bit farthest to the left.</p><p><strong>~</strong>: A tilde. A very lovely symbol. Sometimes referred to as &ldquo;that squiggle&rdquo;.</p></div></div></div><p>Note that this is all kind of a pain and rather more complicated than it seems to need to be, but a certain amount of complexity is what allows computers to do a lot of math <em>very</em> quickly, and doing it quickly is really what&rsquo;s important here.</p><p>Going back to the original question of &ldquo;what in the world happened when we ran <code>~4</code>&rdquo;, it turns out that <code>~</code> is a <code>unary operator</code>, in that it does math on a single number. Specifically, what it does is it performs a &ldquo;NOT&rdquo; operation on the number. A NOT operation flips all of the bits from 0 to 1 (or vice versa). This is what that looks like (spoiler alert: I&rsquo;m about to ruin this and make it more complicated):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>100  # Starting with 4...
</span></span><span class=line><span class=cl>↓↓↓  # ...invert the bits.
</span></span><span class=line><span class=cl>011  # This looks like 3, but it&#39;s not. I&#39;ll explain why.
</span></span></code></pre></td></tr></table></div></div><p>This interaction <a href=https://en.wikipedia.org/wiki/Two%27s_complement target=_blank rel="noopener noreffer">is called a &ldquo;Two&rsquo;s Complement&rdquo;</a>, and is used by pretty much all modern computers. (As opposed to the <a href=https://en.wikipedia.org/wiki/Ones%27_complement target=_blank rel="noopener noreffer">One&rsquo;s Complement</a>, which you can read about separately if you&rsquo;re interested.) I deliberately left some pieces off of the earlier example, so let&rsquo;s look at it again. The first thing we need to do is tack on another bit to the left side, and we&rsquo;ll use that to keep track of whether a number is positive or negative. 0 is positive, 1 is negative.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>0 100  # positive 4
</span></span><span class=line><span class=cl>↓ ↓↓↓  # invert the bits
</span></span><span class=line><span class=cl>1 011  # negative... five?
</span></span></code></pre></td></tr></table></div></div><p>Here&rsquo;s where it gets <em>real weird</em>. When reading the complement (the inverted version), you treat the Most Significant Bit (MSB) as a number&mldr; that you subtract the others from. The way you read the last number is:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>1 0 1 1  # MSB = 1, so it&#39;s negative
</span></span><span class=line><span class=cl>x x x x  # ...times...
</span></span><span class=line><span class=cl>8 4 2 1  # the placement of the numbers in binary
</span></span><span class=line><span class=cl>-------
</span></span><span class=line><span class=cl>8 0 2 1  # Normally, we&#39;d sum these together.
</span></span><span class=line><span class=cl>         # However, there are two things different
</span></span><span class=line><span class=cl>         # here: one is that the MSB is 1, which means
</span></span><span class=line><span class=cl>         # it&#39;s negative, so we actually have:
</span></span><span class=line><span class=cl>-8 0 2 1
</span></span><span class=line><span class=cl>         # Second, we want to take the MSB and
</span></span><span class=line><span class=cl>         # subtract the others from it, which looks
</span></span><span class=line><span class=cl>         # like this:
</span></span><span class=line><span class=cl>-8 - (2 + 1)
</span></span><span class=line><span class=cl>-8 - 3
</span></span><span class=line><span class=cl>------
</span></span><span class=line><span class=cl>-5       # ...and there&#39;s our result. NOT 4 is -5.
</span></span></code></pre></td></tr></table></div></div><p>Fun fact: to get the proper negative version of your starting number, it&rsquo;s the same process as outlined above, just with adding 1 (0 001) to the number before &lsquo;assembling&rsquo; it with the MSB.</p><h2 id=what-can-you-do-with-it>What can you do with it?</h2><p>So now that we&rsquo;ve gone over how this works, let&rsquo;s talk about silly things you can do with it.</p><h3 id=accessing-the-end-of-lists>Accessing the end of lists</h3><p>In Python, lists can be accessed from the end by using negative indexing, i.e.:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>example</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;b&#39;</span><span class=p>,</span> <span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;d&#39;</span><span class=p>,</span> <span class=s1>&#39;e&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>example</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;b&#39;</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>example</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;e&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p>Notice that the first one is the second element in, but asking for the negative indexed version gets us the last element of the list. Enter the magic tilde:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>example</span><span class=p>[</span><span class=o>~</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;d&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p>Perfection, and <em>very</em> fast on large lists! In Python, there are only a handful of ways to go through lists backwards, and some of them are a little silly:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># using the invert operator to to request</span>
</span></span><span class=line><span class=cl><span class=c1># the 4th element from the end</span>
</span></span><span class=line><span class=cl>❯ python -m timeit <span class=s2>&#34;x=list(range(1,100));x[~4]&#34;</span>
</span></span><span class=line><span class=cl><span class=m>500000</span> loops, best of 5: <span class=m>462</span> nsec per loop
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># asking for it directly using -n - 1</span>
</span></span><span class=line><span class=cl>❯ python -m timeit <span class=s2>&#34;x=list(range(1,100));x[-5]&#34;</span>
</span></span><span class=line><span class=cl><span class=m>500000</span> loops, best of 5: <span class=m>473</span> nsec per loop
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># arguably a more reasonable way to do this in most cases</span>
</span></span><span class=line><span class=cl>❯ python -m timeit <span class=s2>&#34;x=list(range(1,100));x.reverse();x[4]&#34;</span>
</span></span><span class=line><span class=cl><span class=m>500000</span> loops, best of 5: <span class=m>499</span> nsec per loop
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ...I don&#39;t recommend this</span>
</span></span><span class=line><span class=cl>❯ python -m timeit <span class=s2>&#34;x=list(range(1,100));x=[i for i in reversed(x)];x[4]&#34;</span>
</span></span><span class=line><span class=cl><span class=m>200000</span> loops, best of 5: 1.51 usec per loop
</span></span></code></pre></td></tr></table></div></div><p>However, on lists of smaller size, it comes out to about the same:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>❯ python -m timeit <span class=s2>&#34;x=list(range(1,10));x[~4]&#34;</span>
</span></span><span class=line><span class=cl><span class=m>2000000</span> loops, best of 5: <span class=m>145</span> nsec per loop
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>❯ python -m timeit <span class=s2>&#34;x=list(range(1,10));x[-5]&#34;</span>
</span></span><span class=line><span class=cl><span class=m>2000000</span> loops, best of 5: <span class=m>147</span> nsec per loop
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>❯ python -m timeit <span class=s2>&#34;x=list(range(1,10));x.reverse();x[4]&#34;</span>
</span></span><span class=line><span class=cl><span class=m>2000000</span> loops, best of 5: <span class=m>144</span> nsec per loop
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>❯ python -m timeit <span class=s2>&#34;x=list(range(1,10));x=[i for i in reversed(x)];x[4]&#34;</span>
</span></span><span class=line><span class=cl><span class=m>1000000</span> loops, best of 5: <span class=m>362</span> nsec per loop
</span></span></code></pre></td></tr></table></div></div><h3 id=a-direct-not-operator>A direct &rsquo;not&rsquo; operator</h3><p>In some third party libraries like <code>django</code> and <code>numpy</code>, the tilde operator is implemented as a way to say &ldquo;the opposite of this&rdquo;. For Django, you can <a href=https://docs.djangoproject.com/en/dev/ref/models/querysets/#q-objects target=_blank rel="noopener noreffer">use them with Q() queryset objects</a> to reverse the meaning of a Q() condition.</p><p>For example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>Question</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=n>Q</span><span class=p>(</span><span class=n>question__startswith</span><span class=o>=</span><span class=s2>&#34;Who&#34;</span><span class=p>)</span> <span class=o>|</span> <span class=o>~</span><span class=n>Q</span><span class=p>(</span><span class=n>pub_date__year</span><span class=o>=</span><span class=mi>2005</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>In numpy, you can use it on an array of booleans to flip everything in the array:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=o>~</span><span class=n>numpy</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>],</span> <span class=n>dtype</span><span class=o>=</span><span class=nb>bool</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>array</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span>  <span class=kc>True</span><span class=p>,</span>  <span class=kc>True</span><span class=p>])</span>
</span></span></code></pre></td></tr></table></div></div><p>You can also use it to <a href=https://stackoverflow.com/a/46054354 target=_blank rel="noopener noreffer">do silly things with pandas dataframes</a>!</p><h3 id=write-your-own-functionality>Write your own functionality</h3><p>The tilde calls a magic method called <code>__invert__()</code>, which you can implement yourself in your own objects!</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=k>class</span> <span class=nc>MyThing</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=o>...</span>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=o>...</span>        <span class=bp>self</span><span class=o>.</span><span class=n>value</span> <span class=o>=</span> <span class=n>value</span>
</span></span><span class=line><span class=cl><span class=o>...</span>    <span class=k>def</span> <span class=fm>__invert__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=o>...</span>        <span class=k>return</span> <span class=s2>&#34;INVERTED!&#34;</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>MyThing</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=o>~</span><span class=n>x</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;INVERTED!&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p>What kind of incredibly questionable things can you add to <em>your</em> projects?</p><h2 id=wrapping-up>Wrapping up</h2><p>Trying to figure out why all this works sent me down a rabbit hole, and for someone without a CS degree, there was a lot to uncover! Hopefully you learned something too. Go thou and invert!</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>The Python read-eval-print-loop system that runs when you just type <code>python</code> in your terminal.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2024-06-17</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/typos-and-bitwise-operations/index.md target=_blank>Read Markdown</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://itsthejoker.github.io/typos-and-bitwise-operations/ data-title="Typos and Bitwise Operations" data-via=joekaufeld data-hashtags=python,terminal><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://itsthejoker.github.io/typos-and-bitwise-operations/ data-hashtag=python><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Tumblr" data-sharer=tumblr data-url=https://itsthejoker.github.io/typos-and-bitwise-operations/ data-title="Typos and Bitwise Operations" data-tags=python,terminal><i class="fab fa-tumblr fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://itsthejoker.github.io/typos-and-bitwise-operations/ data-title="Typos and Bitwise Operations"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Reddit" data-sharer=reddit data-url=https://itsthejoker.github.io/typos-and-bitwise-operations/><i class="fab fa-reddit fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://itsthejoker.github.io/typos-and-bitwise-operations/ data-title="Typos and Bitwise Operations"><i data-svg-src=/lib/simple-icons/icons/line.min.svg aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/python/>Python</a>,&nbsp;<a href=/tags/terminal/>Terminal</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/joplin-and-fastmail/ class=prev rel=prev title="Joplin and Fastmail"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Joplin and Fastmail</a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2019 - 2024</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://joekaufeld.com target=_blank>Joe Kaufeld</a></span>&nbsp;|&nbsp;<span class=license>All rights reserved.</span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=/lib/katex/katex.min.css><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/lunr/lunr.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/contrib/auto-render.min.js></script><script type=text/javascript src=/lib/katex/contrib/copy-tex.min.js></script><script type=text/javascript src=/lib/katex/contrib/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript src=https://plausible.io/js/plausible.js async defer data-domain=itsthejoker.github.io></script></body></html>